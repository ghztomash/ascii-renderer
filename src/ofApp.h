#pragma once

#include "ofMain.h"
#include "ofxFontStash.h"
#include "ofxButton.h"
#include "ofxGui.h"
#include "ofxPanel.h"
#include "ofxToggle.h"
#include "baseRenderer.h"
#include "implRenderer.h"
#include "RendererFactory.h"
#include "ColorTheme.h"
#include "ImageSaverThread.h"

#ifdef MEASURE_PERFORMANCE
#include "ofxTimeMeasurements.h"
#else
#define TIME_SAMPLE_START ;
#define TIME_SAMPLE_STOP ;
#endif

#define NUM_BUFFERS 4

class ofApp : public ofBaseApp {
public:
    void setup();
    void update();
    void draw();

    void loadFont();

    void keyPressed(int key);
    void keyReleased(int key);
    void mouseMoved(int x, int y);
    void mouseDragged(int x, int y, int button);
    void mousePressed(int x, int y, int button);
    void mouseReleased(int x, int y, int button);
    void mouseEntered(int x, int y);
    void mouseExited(int x, int y);
    void windowResized(int w, int h);
    void dragEvent(ofDragInfo dragInfo);
    void gotMessage(ofMessage msg);
    void sizeChanged(int &d);
    void offsetChanged(float &d);
    void marginChanged(int &d);
    void characterSetChanged(int &d);
    void calculateGridSize();
    void drawTheme(int x, int y, int size);
    string getCharacter(size_t i);
    size_t findNearestColor(ofColor col);
    void sortCharacterSet(bool reverseOrder = false);
    void makeVideo();
    int secondsToFrames(float seconds);

    void startRecording();
    void allocateFbo();
    void convertFboToAscii();

    bool drawGui = true;

    vector<string> characterSets = {
        "â–‘â–’â–ˆ",
        " âˆ´âˆµâˆ¶âˆ·/:_â—œâ—â— +*`=?!Â¬â–‘â–’â–„â–€â–ˆ",
        "âˆ™âˆ´âˆµâˆ¶âˆ·/:_â—œâ—â— +-.<>{};'][*&^%$#@!~*`=?!Â¬â–‘â–’â–ˆ",
        ".,~!?@#$%^&*|/()_+-={}[];:<>",
        "âˆ™âˆ´âˆµâˆ¶âˆ·/:_â—œâ—â— +-.'][*#`Â¬â“—â’£â„â„â„Œá¸£â„â„‹á¾á¸«",
        " .'-_â—â—œ:âˆ¶â— Â¬âˆµâˆ´âˆ™*+âˆ·/][â„á¸£â„á¸«#â„",
        ".,~!?%^&*|/()_+-={}[];::âˆ¶â— Â¬âˆµâˆ´âˆ™*+âˆ·â“šâ’¦Ğºá¸±ĞŒá¸³á¸µÒœÏğ•œğ•¶ĞŒÏ—KÏ°ğ“€á¸´Ò Îšá¸²ğ•‚á¸°â‚­kğŸ„ºâ–•",
        "â˜ºâ˜»â™¥â™¦â™£â™ â€¢â—˜â—‹â—™â™‚â™€â™ªâ™«â˜¼â–ºâ—„â†•â€¼Â¶Â§â–¬â†¨â†‘â†“â†’â†âˆŸâ†”â–²â–¼âŒ‚",
        "Ã¦Ã†Ã´Â¢Â£Â¥â‚§Æ’Ã¡Ã±Ã‘ÂªÂº",
        "Â¿âŒÂ¬Â½Â¼Â¡Â«Â»",
        "â–‘â–’â–“â”‚â”¤â•¡â•¢â•–â••â•£â•‘â•—â•â•œâ•›â”â””â”´â”¬â”œâ”€â”¼â•â•Ÿâ•šâ•”â•©â•¦â• â•â•¬â•§â•¨â•¤â•¥â•™â•˜â•’â•“â•«â•ªâ”˜â”Œâ–ˆâ–„â–Œâ–â–€",
        "Î±ÃŸÎ“Ï€Î£ÏƒÂµÏ„Î¦Î˜Î©Î´âˆÏ†Îµâˆ©â‰¡Â±â‰¥â‰¤âŒ âŒ¡Ã·â‰ˆÂ°âˆ™Â·âˆšâ¿Â²â– ",
        " âˆ™âˆ´âˆµâˆ¶âˆ·/:_â—œâ—â— +-.,<>()[]{}:;~'*&^%$#@!~*`=?!Â¬â–‘â–’â–“â–ˆ1234567890â˜ºâ˜»â™¥â™¦â™£â™ â€¢â—˜â—‹â—™â™‚â™€â™ªâ™«â˜¼â–ºâ—„â†•â€¼Â¶ \
            Â§â–¬â†¨â†‘â†“â†’â†âˆŸâ†”â–²â–¼âŒ‚Ã¦Ã†Ã´Â¢Â£Â¥â‚§Æ’Ã¡Ã±Ã‘ÂªÂºÂ¿âŒÂ¬Â½Â¼Â¡Â«Â»â”‚â”¤â•¡â•¢â•–â••â•£â•‘â•—â•â•œâ•›â”â””â”´â”¬â”œâ”€â”¼â•â•Ÿâ•šâ•”â•©â•¦â• â•â•¬â•§â•¨â•¤â•¥â•™â•˜â•’â•“â•«â•ªâ”˜â”Œâ–„â–Œâ–â–€Î±ÃŸÎ“Ï€Î£ÏƒÂµÏ„Î¦Î˜Î©Î´âˆÏ†Îµâˆ©â‰¡Â±â‰¥â‰¤âŒ âŒ¡Ã·â‰ˆÂ°âˆ™Â·âˆšâ¿Â²â– ",
        "qwertyuiopasdfghjklkzxcvbnm1234567890-=`~!@#$%^&*()_+{}:><?,. /;'][-=",
        "â˜ºâ˜»â™¥â™¦â™£â™ â€¢â—˜â—‹â—™â™‚â™€â™ªâ™«â˜¼â–ºâ—„â†•â€¼Â¶Â§â–¬â†¨â†‘â†“â†’â†âˆŸâ†”â–²â–¼âŒ‚",
        "Ã¦Ã†Ã´Â¢Â£Â¥â‚§Æ’Ã¡Ã±Ã‘ÂªÂº",
        "Â¿âŒÂ¬Â½Â¼Â¡Â«Â»",
        "â–‘â–’â–“â”‚â”¤â•¡â•¢â•–â••â•£â•‘â•—â•â•œâ•›â”â””â”´â”¬â”œâ”€â”¼â•â•Ÿâ•šâ•”â•©â•¦â• â•â•¬â•§â•¨â•¤â•¥â•™â•˜â•’â•“â•«â•ªâ”˜â”Œâ–ˆâ–„â–Œâ–â–€",
        "Î±ÃŸÎ“Ï€Î£ÏƒÂµÏ„Î¦Î˜Î©Î´âˆÏ†Îµâˆ©â‰¡Â±â‰¥â‰¤âŒ âŒ¡Ã·â‰ˆÂ°âˆ™Â·âˆšâ¿Â²â– ",
        "ğŒ€ğŒğŒ‚ğŒƒğŒ„ğŒ…ğŒ†ğŒ‡ğŒˆğŒ‰ğŒŠğŒ‹ğŒŒğŒğŒğŒğŒğŒ‘ğŒ’ğŒ“ğŒ”ğŒ•ğŒ–ğŒ—ğŒ˜ğŒ™ğŒšğŒ›ğŒœğŒğŒğŒŸğŒ ğŒ¡ğŒ¢ğŒ£ğŒ¤ğŒ¥ğŒ¦ğŒ§ğŒ¨ğŒ©ğŒªğŒ«ğŒ¬ğŒ­ğŒ®ğŒ¯ğŒ°ğŒ±ğŒ²ğŒ³ğŒ´ğŒµğŒ¶ğŒ·ğŒ¸ğŒ¹ğŒºğŒ»ğŒ¼ğŒ½ğŒ¾ğŒ¿ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³ğ´ğµğ¶ğ·ğ¸ğ¹ğºğ»ğ¼ğ½",
        "ğ²€ğ²ğ²¬ğ³¡ğŠ€ğŠŒğŠ™ğŠ™",
        "ğŠ™Ï Ï¡Ï¢Ï£Ï¤Ï¥Ï¦Ï§Ï¨Ï©ÏªÏ«Ï¬Ï­Ï®Ï¯Ï°Ï±Ï²Ï³Ï´ÏµÏ¶Ï·Ï¸Ï¹ÏºÏ»Ï¼Ï½Ï¾Ï¿ÏŸÏÏÏœÏ›ÏšÏ™Ï˜Ï—Ï–Ï•Ï”Ï“Ï’Ï‘ÏÏÏÏÏŒÏ‹ÏŠÏ‰ÏˆÏ‡Ï‡Ï†Ï…Ï„ÏƒÏ‚ÏÎ¸Ï‘Î¾Î²Î±Î¶Î¾",
        "Æ€ÆÆ‚ÆƒÆ„Æ…Æ†Æ‡ÆˆÆ‰ÆŠÆ‹ÆŒÆÆÆÆÆ‘Æ’Æ“Æ”Æ•Æ–Æ—Æ˜Æ™ÆšÆ›ÆœÆÆÆŸÆ Æ¡Æ¢Æ£Æ¤Æ¥Æ¦Æ§Æ¨Æ©ÆªÆ«Æ¬Æ­Æ®Æ¯Æ°Æ±Æ²Æ³Æ´ÆµÆ¶Æ·Æ¸Æ¹ÆºÆ»Æ¼Æ½Æ¾Æ¿Ç€ÇÇ‚ÇƒÇŒÇÇÇÇÇ‘Ç’Ç“Ç”Ç•Ç–Ç—Ç˜Ç™ÇšÇ›ÇœÇÇÇŸÇ Ç¡Ç¢Ç£Ç¤Ç¥Ç¦Ç»Ç¼Ç½Ç¾Ç¿",
        "ÉÉ‘É’É“É”É•É–É—É˜É™ÉšÉ›ÉœÉÉÉŸÉ É¡É¢É£É¤É¥É¦É§É¨É©ÉªÉ«É¬É­É®É¯É°É±É²É³É´ÉµÉ¶É·É¸É¹ÉºÉ»É¼É½É¾É¿Ê€ÊÊ‚ÊƒÊ„Ê…Ê†Ê‡ÊˆÊ‰ÊŠÊ‹ÊŒÊÊÊÊÊ‘Ê’Ê“Ê”Ê•Ê–Ê—Ê˜Ê™ÊšÊ›ÊœÊÊÊŸÊ Ê¡Ê¢Ê£Ê¤Ê¥Ê¦Ê§Ê¨Ê©ÊªÊ«Ê¬Ê­Ê®Ê¯",
        "Ê°Ê±Ê²Ê³Ê´ÊµÊ¶Ê·Ê¸Ê¹ÊºÊ»Ê¼Ê½Ê¾Ê¿Ë€ËË‚ËƒË„Ë…Ë†Ë‡ËˆË‰ËŠË‹ËŒËËËËË‘Ë’Ë“Ë”Ë•Ë–Ë—Ë˜Ë™ËšË›ËœËËËŸË Ë¡Ë¢Ë£Ë¤Ë¥Ë¦Ë§Ë¨Ë©ËªË«Ë¬Ë­Ë®Ë¯Ë°Ë±Ë²Ë³Ë´ËµË¶Ë·Ë¸Ë¹ËºË»Ë¼Ë½Ë¾Ë¿Ì€ÌÌ‚ÌƒÌ„Ì…Ì†Ì‡ÌˆÌ‰ÌŠÌ‹ÌŒÌÌÌÌÌ‘Ì’Ì“Ì”Ì•Ì–Ì—Ì˜Ì™ÌšÌ›ÌœÌÌÌŸÌ Ì¡Ì¢Ì£Ì¤Ì¥Ì¦Ì§Ì¨Ì©ÌªÌ«Ì¬Ì­Ì®Ì¯Ì°Ì±Ì²Ì³Ì´ÌµÌ¶Ì·Ì¸Ì¹ÌºÌ»Ì¼Ì½Ì¾Ì¿Í€ÍÍ‚ÍƒÍ„",
        "Í°Í±Í²Í³Í´ÍµÍ¶Í·Í¸Í¹ÍºÍ»Í¼Í½Í¾Í¿Î€ÎÎ‚ÎƒÎ„Î…Î†Î‡ÎˆÎ‰ÎŠÎ‹ÎŒÎÎÎÎÎ‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î¢Î£Î¤Î¥Î¦Î§Î¨Î©ÎªÎ«Î¬Î­Î®Î¯Î°Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏ‚ÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰ÏŠÏ‹ÏŒÏÏÏÏÏ‘Ï’Ï“Ï”Ï•Ï–Ï—Ï˜Ï™ÏšÏ›ÏœÏÏÏŸÏ Ï¡Ï¢Ï£Ï¤Ï¥Ï¦Ï§Ï¨Ï©ÏªÏ«Ï¬Ï­Ï®Ï¯Ï°Ï±Ï²Ï³Ï´ÏµÏ¶Ï·Ï¸Ï¹ÏºÏ»Ï¼Ï½Ï¾Ï¿ÏŸÏÏÏœÏ›ÏšÏ™Ï˜Ï—Ï–Ï•Ï”Ï“Ï’Ï‘ÏÏÏÏÏŒÏ‹ÏŠÏ‰ÏˆÏ‡Ï‡Ï†Ï…Ï„ÏƒÏ‚ÏÎ¸Ï‘Î¾Î²Î±Î¶Î¾",
        "ß€ßß‚ßƒß„ß…ß†ß‡ßˆß‰ßŒßßß¢ßšßß¹ß¸ß¿ß¾ß¶ß¡ß¥ß‘",
        "áá‚áƒá„á‡á‰áˆá”á–á›á‘…á‘‡á‘ƒá‘½á‘»á’²á’ºá“¬á“˜á“·á“á’·á’°á’ á’",
        "â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â†šâ†›â†œâ†â†â†Ÿâ† â†¡â†¢â†£â†¤â†¥â†¦â†§â†¨â†©â†ªâ†«â†¬â†­â†®â†¯â†°â†±â†²â†³â†´â†µâ†¶â†·â†¸â†¹â†ºâ†»â†¼â†½â†¾â†¿â‡€â‡â‡‚â‡ƒâ‡„â‡…â‡†â‡‡â‡ˆâ‡‰â‡Šâ‡‹â‡Œâ‡â‡â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡šâ‡›â‡œâ‡â‡â‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡¨â‡©â‡ªâ‡«â‡¬â‡­â‡®â‡¯â‡°â‡±â‡²â‡³â‡´â‡µâ‡¶â‡·â‡¸â‡¹â‡ºâ‡»â‡¼â‡½â‡¾â‡¿",
        "âŒ€âŒâŒ‚âŒƒâŒ„âŒ…âŒ†âŒ‡âŒˆâŒ‰âŒŠâŒ‹âŒŒâŒâŒâŒâŒâŒ‘âŒ’âŒ“âŒ”âŒ•âŒ–âŒ—âŒ˜âŒ™âŒšâŒ›âŒœâŒâŒâŒŸâŒ âŒ¡âŒ¢âŒ£âŒ¤âŒ¥âŒ¦âŒ§âŒ¨âŒ©âŒªâŒ«âŒ¬âŒ­âŒ®âŒ¯âŒ°âŒ±âŒ²âŒ³âŒ´âŒµâŒ¶âŒ·âŒ¸âŒ¹âŒºâŒ»âŒ¼âŒ½âŒ¾âŒ¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨â©âªâ«â¬â­â®â¯â°â±â²â³â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨â©",
        "âˆ€âˆâˆ‚âˆƒâˆ„âˆ…âˆ†âˆ‡âˆˆâˆ‰âˆŠâˆ‹âˆŒâˆâˆâˆâˆâˆ‘âˆ’âˆ“âˆ”âˆ•âˆ–âˆ—âˆ˜âˆ™âˆšâˆ›âˆœâˆâˆâˆŸâˆ âˆ¡âˆ¢âˆ£âˆ¤âˆ¥âˆ¦âˆ§âˆ¨âˆ©âˆªâˆ«âˆ¬âˆ­âˆ®âˆ¯âˆ°âˆ±âˆ²âˆ³âˆ´âˆµâˆ¶âˆ·âˆ¸âˆ¹âˆºâˆ»âˆ¼âˆ½âˆ¾âˆ¿â‰€â‰â‰‚â‰ƒâ‰„â‰…â‰†â‰‡â‰ˆâ‰‰â‰Šâ‰‹â‰Œâ‰â‰â‰â‰â‰‘â‰’â‰“â‰”â‰•â‰–â‰—â‰˜â‰™â‰šâ‰›â‰œâ‰â‰â‰Ÿâ‰ â‰¡â‰¢â‰£â‰¤â‰¥â‰¦â‰§â‰¨â‰©â‰ªâ‰«â‰¬â‰­â‰®â‰¯â‰°â‰±â‰²â‰³â‰´â‰µâ‰¶â‰·â‰¸â‰¹â‰ºâ‰»â‰¼â‰½â‰¾â‰¿",
        "â–€â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‰â–Šâ–‹â–Œâ–â–â–â–â–‘â–’â–“â–”â–•â––â–—â–˜â–™â–šâ–›â–œâ–â–â–Ÿ",
        "â– â–¡â–¢â–£â–¤â–¥â–¦â–§â–¨â–©â–ªâ–«â–¬â–­â–®â–¯â–°â–±â–²â–³â–´â–µâ–¶â–·â–¸â–¹â–ºâ–»â–¼â–½â–¾â–¿â—€â—â—‚â—ƒâ—„â—…â—†â—‡â—ˆâ—‰â—Šâ—‹â—Œâ—â—â—â—â—‘â—’â—“â—”â—•â—–â——â—˜â—™â—šâ—›â—œâ—â—â—Ÿâ— â—¡â—¢â—£â—¤â—¥â—¦â—§â—¨â—©â—ªâ—«â—¬â—­â—®â—¯â—°â—±â—²â—³â—´â—µâ—¶â—·â—¸â—¹â—ºâ—»â—¼â—½â—¾â—¿",
        "â˜°â˜±â˜²â˜³â˜´â˜µâ˜¶â˜·â˜¸â˜¹â˜ºâ˜»â˜¼â˜½â˜¾â˜¿â™€â™â™‚â™ƒâ™„â™…â™†â™‡â™ˆâ™‰â™Šâ™‹â™Œâ™â™â™â™â™‘â™’â™“â™”â™•â™–â™—â™˜â™™â™šâ™›â™œâ™â™â™Ÿâ™ â™¡â™¢â™£â™¤â™¥â™¦â™§â™¨â™©â™ªâ™«â™¬â™­â™®â™¯â™°â™±â™²â™³â™´â™µâ™¶â™·â™¸â™¹â™ºâ™»â™¼â™½â™¾â™¿âšŠâš‹âšŒâšâš–âš—âš˜âš™âššâš›âšœâšâšâšŸâš âš¡âš¢âš£âš¤âš¥âš¦âš§âš¨âš©âšªâš«âš¬âš­âš®âš¯âš°âš±âš²âš³âš´âšµâš¶âš·âš¸âš¹âšºâš»âš¼âš½âš¾âš¿â›€â›â›‚â›ƒâ›„â›…â›†â›‡â›ˆâ›‰â›Šâ›‹â›Œâ›â›â›â›â›‘â›’â›“â›”â›•â›–â›—â›˜â›™â›šâ››â›œâ›â›â›Ÿâ› â›¡â›¢â›£â›¤â›¥â›¦â›§â›¨â›©â›ªâ›«â›¬â›­â›®â›¯â›°â›±â›²â›³â›´â›µâ›¶â›·â›¸â›¹â›ºâ›»â›¼â›½â›¾â›¿âœ€âœâœ‚âœƒâœ„âœ…âœ†âœ‡âœˆâœ‰âœŠâœ‹âœŒâœâœâœâœâœ‘âœ’âœ“âœ”âœ•âœ–âœ—âœ˜âœ™âœšâœ›âœœâœâœâœŸâœ âœ¡âœ¢âœ£âœ¤âœ¥âœ¦âœ§âœ¨âœ©âœªâœ«âœ¬âœ­âœ®âœ¯âœ°âœ±âœ²âœ³âœ´âœµâœ¶âœ·âœ¸âœ¹âœºâœ»âœ¼âœ½",
        "áš áš¡áš¢áš£áš¤áš¥áš¦áš§áš¨áš©ášªáš«áš¬áš­áš®áš¯áš°áš±áš²áš³áš´ášµáš¶áš·áš¸áš¹ášºáš»áš¼áš½áš¾áš¿á›€á›á›‚á›ƒá›„á›…á›†á›‡á›ˆá›‰á›Šá›‹á›Œá›á›á›á›á›‘á›’á›“á›”á›•á›–á›—á›˜á›™á›šá››á›œá›á›á›Ÿá› á›¡á›¢á›£á›¤á›¥á›¦á›§á›¨á›©á›ªá›«á›¬á›­á›®á›¯á›°áœ áœ¡áœ¢áœ£áœ¤áœ¥áœ¦áœ§áœ¨áœ©áœªáœ«áœ¬áœ­áœ®áœ¯áœ°áœ±áœ²áœ³áœ´áœµáœ¶",
        "ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™ğšğ›ğœğ",
        "âŸ€âŸâŸ‚âŸƒâŸ„âŸ…âŸ†âŸ‡âŸˆâŸ‰âŸŠâŸ‹âŸŒâŸâŸâŸâŸâŸ‘âŸ’âŸ“âŸ”âŸ•âŸ–âŸ—âŸ˜âŸ™âŸšâŸ›âŸœâŸâŸâŸŸâŸ âŸ¡âŸ¢âŸ£âŸ¤âŸ¥âŸ¦âŸ§âŸ¨âŸ©âŸªâŸ«âŸ¬âŸ­âŸ®âŸ¯âŸ°âŸ±âŸ²âŸ³âŸ´âŸµâŸ¶âŸ·âŸ¸âŸ¹âŸºâŸ»âŸ¼âŸ½âŸ¾âŸ¿",
        "â¤€â¤â¤‚â¤ƒâ¤„â¤…â¤†â¤‡â¤ˆâ¤‰â¤Šâ¤‹â¤Œâ¤â¤â¤â¤â¤‘â¤’â¤“â¤”â¤•â¤–â¤—â¤˜â¤™â¤šâ¤›â¤œâ¤â¤â¤Ÿâ¤ â¤¡â¤¢â¤£â¤¤â¤¥â¤¦â¤§â¤¨â¤©â¤ªâ¤«â¤¬â¤­â¤®â¤¯â¤°â¤±â¤²â¤³â¤´â¤µâ¤¶â¤·â¤¸â¤¹â¤ºâ¤»â¤¼â¤½â¤¾â¤¿â¥€â¥â¥‚â¥ƒâ¥„â¥…â¥†â¥‡â¥ˆâ¥‰â¥Šâ¥‹â¥Œâ¥â¥â¥â¥â¥‘â¥’â¥“â¥”â¥•â¥–â¥—â¥˜â¥™â¥šâ¥›â¥œâ¥â¥â¥Ÿâ¥ â¥¡â¥¢â¥£â¥¤â¥¥â¥¦â¥§â¥¨â¥©â¥ªâ¥«â¥¬â¥­â¥®â¥¯â¥°â¥±â¥²â¥³â¥´â¥µâ¥¶â¥·â¥¸â¥¹â¥ºâ¥»â¥¼â¥½â¥¾â¥¿",
        "â¦€â¦â¦‚â¦ƒâ¦„â¦…â¦†â¦‡â¦ˆâ¦‰â¦Šâ¦‹â¦Œâ¦â¦â¦â¦â¦‘â¦’â¦“â¦”â¦•â¦–â¦—â¦˜â¦™â¦šâ¦›â¦œâ¦â¦â¦Ÿâ¦ â¦¡â¦¢â¦£â¦¤â¦¥â¦¦â¦§â¦¨â¦©â¦ªâ¦«â¦¬â¦­â¦®â¦¯â¦°â¦±â¦²â¦³â¦´â¦µâ¦¶â¦·â¦¸â¦¹â¦ºâ¦»â¦¼â¦½â¦¾â¦¿â§„â§…â§†â§‡â§ˆâ§‰â§Šâ§‹â§Œâ§â§â§â§â§‘â§’â§“â§”â§•â§–â§—â§˜â§™â§šâ§›â§œâ§â§â§Ÿâ§ â§¡â§¢â§£â§¤â§¥â§¦â§§â§¨â§©â§ªâ§«â§¬â§­â§®â§¯â§°â§±â§²â§³â§´â§µâ§¶â§·â§¸â§¹â§ºâ§»â§¼â§½â§¾â§¿",
        "â¬°â¬±â¬²â¬³â¬´â¬µâ¬¶â¬·â¬¸â¬¹â¬ºâ¬»â¬¼â¬½â¬¾â¬¿â­€â­â­‚â­ƒâ­„â­…â­†â­‡â­ˆâ­‰â­Šâ­‹â­Œâ­â­â­â­â­‘â­’â­“â­”â­•â­–â­—â­˜â­™â­šâ­›â­œâ­â­â­Ÿâ­ â­¡â­¢â­£â­¤â­¥â­¦â­§â­¨â­©â­ªâ­«â­¬â­­â­®â­¯â­°â­±â­²â­³â­´â­µâ­¶â­·â­¸â­¹â­ºâ­»â­¼â­½â­¾â­¿",
        "\ueafc\ue702\ueabe\ueac4\ueb9b\ueafe\uea64\uebbc\uebc6\ue708\ue7c5\uf303\uf306\uf323"
    };
    size_t characterSetSize;
    size_t index;

    vector<string> fontNames;

    ofxFontStash font;
    int fontSize = 48;
    int debugFontSize = 24;
    float debugDescenderH;
    float debugCharHeight;

    // color themes from catpuccin
    // https://github.com/catppuccin/catppuccin/blob/main/docs/style-guide.md
    ofColor crustColor = ofColor::fromHex(0x232634);

    float charHeight;
    float charWidth;
    float ascenderH;
    float descenderH;
    float marginOffsetH;
    float marginOffsetV;
    float cX, cY;

    ofImage bufferPreview;
    ofPixels bufferPreviewPixels;

    float screenSize = 1080;
    float scalar = 1.0;

    float fboWidth = 1080;
    float fboHeight = 1080;
    int frameRate = 30;
    ofFbo fboAscii;

    float fboCanvasWidth = fboWidth / 2.0;
    float fboCanvasHeight = fboHeight / 2.0;

    ofFbo fboCanvas;
    ofPixels canvasPixels;
    ofPixels canvasLastFrame;
    ofImage bufferLastFrame;
    ofFbo fboNoiseTexture;
    ofFbo fboGrid;

    ofFbo fboCharacterBuffer;

    ofxPanel gui;
    ofxIntSlider size;
    ofxIntSlider currentFont;
    ofxIntSlider currentCharacterSet;
    ofxToggle enableColors;
    ofxIntSlider currentTheme;
    ofxFloatSlider offsetH;
    ofxFloatSlider offsetV;
    ofxIntSlider marginSize;
    ofxToggle zoom;
    ofxToggle debugGrid;
    ofxToggle debugLines;
    ofxToggle debugBuffer;
    ofxToggle blur;
    ofxIntSlider fadeAmmount;

    string projectName = "test";
    ofxFloatSlider recordSeconds;
    ofxButton record;
    ofxButton video;

    int recordFramesNumber = 0;
    int recordedFramesCount;
    bool recording = false;

    ImageSaverThread saverThread;
    // declare ring buffer of ofBufferObject pointers
    ofBufferObject ringBuffer[NUM_BUFFERS];
    int ringBufferIndex=0;
    int lastRingBufferIndex=0;
    PixelsToSave p;

    time_t t;
    struct tm *tm;
    char time_string[64];

    bool recalculateGridSize = false;
    int gridWidth, gridHeight;

    ofxPanel guiRenderer;
    noiseRenderer noise;
    vector<shared_ptr<baseRenderer>> renderersVec;
};
